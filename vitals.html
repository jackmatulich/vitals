
<!DOCTYPE html>
<html>
<head>
  
  <script src="//dweet.io/client/dweet.io.min.js"></script>
  <script src="//cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous"> <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

 
<style>
background{
background-color:black;
}
table {
  font-family: helvetica, sans-serif;

  width: 100%;
  color:white;
    border-collapse: collapse;
       border-radius:20px;
    border:solid #202020 5px;

}

td, th {
  border:solid black 0px;

  text-align: left;
  padding: 8px;
  padding-left:10px;
}

.gradient {
background: linear-gradient(180deg,grey,1%, black);

}
.left{
border-top-left-radius:20px;
border-bottom-left-radius:20px;

}

.right{
border-top-right-radius:20px;
border-bottom-right-radius:20px;

}
.center{

}



.intbutton {
background: linear-gradient(180deg,grey,1%, black);
font-size:25px;
text-align: center;
border-radius:10px;
 box-shadow: 2px 2px 4px grey inset;


}
.fullblack {
background: black;
}
.grey {
background: #303030;
}
.selected{
background: linear-gradient(0deg,grey,10%, white);
color:#47A2D0;
font-size:22px;
text-align: center;
font-weight:bold;
border-radius:10px;
}
.notselected{
background: linear-gradient(0deg,white,10%, grey);
font-size:19px;
text-align: center;
font-weight:bold;
border-radius:10px;
box-shadow: 2px 1px 4px black inset;
}
.null{
background: linear-gradient(180deg,#303030,1%, #202020);
}
.save{
background: linear-gradient(150deg, #4D9CB0,70%, #265F81);
font-size:20px;
text-align: center;
font-weight:bold;
 box-shadow: 2px 2px 4px lightblue inset;
    border-radius:10px;
}
.lower{
text-align: center;
font-size:20px;
}
.ptnameheader{
font-size:12px;
}
.ptname{
font-size:20px;
font-weight:bold;
}

.bptitle{
font-size:20px;
color:#ECA52E;
}
.bp{
font-size:60px!important;
color:#ECA52E;
font-weight:bold;

}
.prtitle{
font-size:20px;
color:#61B53D;
}
.pr{
font-size:60px;
color:#61B53D;
font-weight:bold;

}
.spO2title{
font-size:20px;
color:#47A2D0;
}
.spO2{
font-size:60px;
color:#47A2D0;
font-weight:bold;

}
.temptitle{
font-size:20px;
color:white;

}
.temp{
font-size:60px;
color:white;
font-weight:bold;

}




</style>




</head>
<body style="background-color:black;" onload="startTime();">
<script>
function startTime() {
  const today = new Date();
  let h = today.getHours();
  let m = today.getMinutes();
  let s = today.getSeconds();

  m = checkTime(m);
  s = checkTime(s);
  document.getElementById('time').innerHTML =  h + ":" + m + ":" + s;
  setTimeout(startTime, 1000);
}

function checkTime(i) {
  if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
  return i;
}
</script>

<table>

<tr class="grey" height="50px"> <!-- Time/UR -->
   <td colspan="1" >
  <span style="font-size:25px; padding:0px"> âš•</span></td>
<td colspan="3">123456</td>
<td colspan="5" id="code">

<!-- code by w3codegenerator.com -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Open modal</button>
<div class="modal fade" id="myModal">
   <div class="modal-dialog modal-xl modal-dialog-centered">
       <div class="modal-content">
           <div class="modal-header">
              <h4 class="modal-title">Controller Link</h4>
               <button type="button" class="close" data-dismiss="modal">&times;</button>
           </div>
          <div class="modal-body">
        <p>Modal body text goes here.</p>
          </div>
           <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
               <button type="button" class="btn btn-primary">Save changes</button>
          </div>
       </div>
  </div>
</div>


</td>
<td colspan="3">ðŸ•”<span id='time'></span></td>
<td colspan="4"></td>
<td colspan="2"></td>
<td colspan="2">ðŸ”ŒðŸ”‹ (97%)</td>
  </tr>


    <tr class="fullblack" height="50px" VALIGN="top"> <!-- Pt Name Header -->
       <td colspan="8">
<span class="ptnameheader">PATIENT NAME</span></br>
<span class="ptname">Patient, Name</span>
       </td>
<td colspan="2">Type</td>
<td colspan="2">Adult</td>
<td colspan="6">PATIENT ID</td>
<td class="intbutton"colspan="2" VALIGN="middle">â–¶</td>


 </tr>




    <tr height="125px"> <!-- BP PR -->
   <td class="gradient left" colspan="10" >

<span class="bptitle">NIBP</span></br>
<span class="bp" id="BP"></span></br>
<span class="bptitle">SYS/DIA mmHg (</span><span id="MAP" class="bptitle"></span><span class="bptitle">)</span></br>
<span>Source: Manual</span></br>




   </td>
<td class="intbutton right" colspan="1" >

<span class="temp"  ></span></br>
<button type="button" onclick="cyclebp()"
>CYCLE</button>

<td>

</td>
<td class="gradient left right" colspan="8">

<span class="prtitle">PULSE RATE</span></br>
<span id="HEARTRATE" class="pr"></span></br>
<span class="prtitle">â™¡/MIN</span></br>
<span>Source: Manual</span></br>



</td>


 </tr>


    <tr height="125px"> <!-- spO2/Temp -->
 <td class="gradient left"  colspan="9">


 <span class="spO2title">SpO2</span></br>
<span id="SPO2" class="spO2"></span></br>
</br>
<span>Source: Manual</span></br>




 </td>
<td class="gradient center" colspan="1">GRAPH</td>
<td class="gradient right" colspan="1"></td>
<td>

</td>
<td class="gradient left right" colspan="8">

<span class="temptitle">TEMPERATURE</span></br>
<span id="TEMP" class="temp"></span></br>
<span class="temptitle">CÂ° (98.6Â°F)</span></br>



</td>


  </tr>


    <tr height="60px">> <!-- QADDS/Save -->
<td class="gradient left lower" colspan="2">

<span >P</span></br>
<span ><strong>0</strong></span></br>



</td>
<td class="gradient lower" colspan="2">

<span >RR</span></br>
<span ><strong>24</strong></span></br>



</td>
<td class="gradient lower" colspan="2">

<span >AVPU</span></br>
<span ><strong>A</strong></span></br>



</td>
<td class="gradient lower" colspan="2">

<span >-</span></br>
<span ><strong>-</strong></span></br>



</td>
<td class="gradient lower right" colspan="2">

<span >EWS</span></br>
<span ><strong>0</strong></span></br>



</td>
<td class="black" colspan="2"></td>
<td class="gradient lower left right" colspan="4"><span style="font-weight:bold" >Clear<span></td>
<td class="save" colspan="4">Save</td>
  </tr>


    <tr height="50px">> <!-- Menu -->
<td class="selected"colspan="4">Home</td>
<td class="notselected" colspan="4">Patient</td>
<td class="notselected"colspan="4">Review</td>
<td class="notselected"colspan="4">Settings</td>
<td class="null"colspan="4"></td>


  </tr>


</table>
<script>

var urlcode = window.location.search;
urlcode = url.replace("?", '');
console.log(urlcode);

 var ucode= "code";
 var code= document.getElementById('code');
 
 var spo2Probe=0;
 var hrRaw=80;
 var hr=80;

 var spo2Raw=99;
 var spo2=99;

  var cuff=1;
  var sbpRaw=120;
  var sbp=120;
  var dbpRaw=60;
  var dbp=60;
  var map=80;
  var DisplayBP=[sbp, dbp].join('/');
  
  var tempProbe=0;
  var temp=36.1;
  var audio = new Audio('Automatic Blood Pressure Monitor Inflation Sound Effect.mp3');
 

let characters = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'
let result = ''
let length = 4 // Customize the length here.
for (let i = length; i > 0; --i) result += characters[Math.round(Math.random() * (characters.length - 1))]
console.log(result)
ucode=result;
console.log("ucode:"+ucode);
code.innerHTML =result;

  dweetio.listen_for(ucode, function(dweet){
   
    dweetio.get_latest_dweet_for(ucode, function(err, dweet){

var dweet = dweet[0]; // Dweet is always an array of 1


console.log("dweet logged"); // The generated name

spo2Probe=parseInt(dweet.content["spo2probe"]);
 hrRaw=parseInt(dweet.content["hr"]);
 spo2Raw=parseInt(dweet.content["spo2"]);

 cuff=parseInt(dweet.content["cuff"]);
 sbpRaw=parseInt(dweet.content["sbp"]);
 dbpRaw=parseInt(dweet.content["dbp"]);

 tempProbe=parseInt(dweet.content["tempprobe"]);
 temp=parseInt(dweet.content["temp"]);

 
});

console.log(hr);
});



function cyclebp(){
  if (cuff > 0) {
    audio.play();
    setTimeout(function() {
      var variability=(Math.floor(Math.random() * 7)-3);
      sbp=variability+sbpRaw;
  dbp=variability+dbpRaw;
  map= (((2*dbp)+sbp)/3);
document.getElementById("BP").innerHTML = DisplayBP;
document.getElementById("MAP").innerHTML = map;
}, 8000);


} else {
  
document.getElementById("BP").innerHTML = "No Cuff";
document.getElementById("MAP").innerHTML = " ";
};


};
 
setInterval(display, 500);

function display() {
  if (spo2Probe > 0) {

  document.getElementById("HEARTRATE").innerHTML = hr;
  document.getElementById("SPO2").innerHTML = spo2;

} else {
  document.getElementById("HEARTRATE").innerHTML = null;
  document.getElementById("SPO2").innerHTML = null;
}

if (tempProbe > 0) {

document.getElementById("TEMP").innerHTML = temp;

} else {
  document.getElementById("TEMP").innerHTML = null;
};


};

setInterval(VitalsVariability, 3000);

function VitalsVariability() {
  var variability=(Math.floor(Math.random() * 7)-3);
  console.log(variability);
  
  spo2=Math.floor(spo2Raw-(variability/3));
  hr=variability+hrRaw;
  
  

};



</script>
</body>
</html>
