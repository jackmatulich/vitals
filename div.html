<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="div.css">
  <title>Document</title>
</head>

<body>



  <!-- Time Row -->
  <div class="row time"></div>



  <!-- ECG Row -->
  <div class="row double">
    <!-- Waveform -->
    <div class="waveform">
      <canvas  id="ecg" width ="2500"height="200"></canvas>
    </div>
    <!-- Numerics -->
    <div class="numerics">

      <!-- Numeric Title -->
      <div class="numericstitle">
        ECG
      </div>
      <!-- Number -->
      <div class="number ecg"> 80

      </div>
    </div>
  </div>

  <!-- spO2 Row -->
  <div class="row single">
    <!-- Waveform -->
    <div class="waveform">

    </div>
    <!-- Numerics -->
    <div class="numerics">

      <!-- Numeric Title -->
      <div class="numericstitle">
        SPO2
      </div>
      <!-- Number -->
      <div class="number spo2"> 98

      </div>
    </div>
  </div>


  <!-- IABP Row -->
  <div class="row double">
    <!-- Waveform -->
    <div class="waveform">

    </div>
    <!-- Numerics -->
    <div class="numerics">
   
      <!-- Numeric Title -->
      <div class="numericstitle">
        IABP
      </div>
      <!-- Number -->
      <div class="number art"> 120/60<div class="map">(80)</div>

      </div>
    </div>
  </div>


  <!-- etCO2 -->
  <div class="row single">
    <!-- Waveform -->
    <div class="waveform">

    </div>
    <!-- Numerics -->
    <div class="numerics">

      <!-- Numeric Title -->
      <div class="numericstitle">
        etCO2
      </div>
      <!-- Number -->
      <div class="number co2">35

      </div>
    </div>
  </div>


  <!-- Lower Number Row -->
  <div class="row single">
    <div class="nibpandtemp">
      <div class="numericstitle">
        NIBP
      </div>
      <div class="number white"> 120/60 (80)

      </div>

    </div>
    <div class="nibpandtemp">
      <div class="numericstitle">
        Temp
      </div>
      <div class="number white">37.8

      </div>

    </div>
    <div class="timer">
      <div class="numericstitle">
        Timer
      </div>
      <div class="number white">0000

      </div>

    </div>
    <div class="numerics">
      <div class="numericstitle">
        Resp Rate
      </div>
      <div class="number resp">12

      </div>

    </div>
  </div>



  <!-- Buttons -->
  <div class="row buttons">
    <div class="button power"><div class="valign">POWER</div></div>
    <div class="button"><div class="valign">START</div></div>
    <div class="button"><div class="valign">CYCLE</div></div>
    <div class="button"><div class="valign">5 MIN</div></div>
    <div class="button"><div class="valign">12 L</div></div>
    <div class="button"><div class="valign">MENU</div></div>
    <div class="button silence"><div class="valign">SHH</div>
  </div>

  <script>
   var rate=60;


    var EcgData=[ "1,2,4,5,7,9,11,14,17,21,23,25,27,28,29,30,29,28,27,26,25,23,21,19,14,11,8,6,4,3,2,1,0,0,1,1,1,0,0,0,1,1,1,1,2,2,1,1,0,0,0,0,1,2,3,6,7,8,9,10,12,14,16,19,22,25,30,35,40,60,80,100,5,4,3,1,-3,-7,-10,-13,-15,-11,-5,-2,0,0,0,1,1,2,2,2,1,1,0,0,0,0,1,1,1,1,2,2,2,3,3,3,2,2,3,3,3,3,4,6,8,10,14,17,20,23,26,29,31,33,35,37,39,40,41,41,41,42,42,42,41,41,41,40,40,40,39,39,39,38,38,36,34,32,30,27,24,21,18,15,13,13,9,9,5,5,5,3,2,1"
];
var currentrhythm=EcgData;
var beatlength=currentrhythm.length;
console.log(beatlength);
var liminal=(2500/rate)-beatlength;
var baseline = Array.from({length: beatlength}, () => Math.floor(Math.random() * 2));
var displayrhythm = currentrhythm.concat(baseline);


    var canvas = document.getElementById("ecg");
    var ctx = ecg.getContext("2d");
    var w = ecg.width,
    h = ecg.height,
    speed = 2,
    scanBarWidth = 20,
    i=0,
    data = displayrhythm[0].split(','),
    color='#00ff00';
    var px = 0;
    var opx = 0;
    var py = h/2; /* should equal 50 if height 100px */ 
    var opy = py; /* should equal 50 if height 100px */ 
    ctx.strokeStyle = color;
    ctx.lineWidth = 5;
    ctx.setTransform(1,0,0,-1,0,h);
drawWave();

    function drawWave() {
       px += speed;  /* adds the value to the right to the variable on the left px(0)+speed (1)=0 */ 
            ctx.clearRect( px,0, scanBarWidth, h);/* (x coord of upper left, y coord of upper left, width in px, heigh in px) */ 
            ctx.beginPath();/* starts the line OR resets */ 
            ctx.moveTo( opx,  opy);/* moves point to XY */ 
            ctx.lineJoin= 'round';/* rounds the join */ 
            py=(data[++i>=data.length? i=0 : i++])/1+30; /* and */ 
            ctx.lineTo(px, py);/* and */ 
            ctx.stroke();/* and */ 
             opx = px;/* and */ 
            opy = py;/* and */ 
            if (opx > w) {px = opx = -speed;}/* and */ 


             requestAnimationFrame(drawWave);/* and */ 
    }
</script>


</body>

</html>